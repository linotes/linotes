---
toc: true
toc_label: "Linux 的使用 - 安全设置"
toc_icon: "angle-double-right"
title: "Linux 的使用 - 安全设置"
tags: linux security 安全
category: "tools"
classes: wide
excerpt: ""
header:
  overlay_image: /assets/images/header/stream.jpg
  overlay_filter: rgba(0, 0, 0, 0.6)
---



## SSH



#### 生成公钥与私钥

使用 `ssh-keygen` 命令生成，默认会保存在 `.ssh/` 目录中，生成两个文件，即私钥 `id_rsa`，公钥 `id_rsa.pub`。

```
$ ssh-keygen -t  rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/root/.ssh/id_rsa):
Created directory '/root/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /root/.ssh/id_rsa.
Your public key has been saved in /root/.ssh/id_rsa.pub.
The key fingerprint is:
69:65:32:1e:dc:e8:59:1f:72:90:0a:a2:73:cb:07:48 root@localhost.localdomain
The key's randomart image is:
+--[ RSA 2048]----+
|          ..     |
|  E . .. o..     |
| . o . .*.* o    |
|  + o  o.X + .   |
|   + o  S   .    |
|    o ..         |
|     .           |
|                 |
|                 |
+-----------------+
```




#### 用私钥生成公钥

如果公钥丢失，可以用私钥重新生成：

```bash
$ ssh-keygen -y -f id_rsa > key.pub
```




#### `authorized_keys`

使用 OpenSSH 时，在服务器端，通常会把授权的公钥放在其默认配置文件 `~/.ssh/authorized_keys` 中。

SSH 的配置文件 `/etc/ssh/sshd_config` 中，`AuthorizedKeysFile` 指令用于告诉服务器去哪里查找授权的密钥。该选项可以包含不止一个位置，中间用空格分隔。
