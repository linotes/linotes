---
toc: true
toc_label: "LEMP 架构: nginx-squid-php"
toc_icon: "copy"
title: "LEMP 架构: nginx-squid-php"
tags: lemp squid nginx php
categories: "framework"
classes: wide
excerpt: ""
header:
  overlay_image: /assets/images/header/squids.jpg
  overlay_filter: rgba(0, 0, 0, 0.8)
---







## 架构简介

Client -> Squid(反向代理) -> Nginx(反向代理) -> php-fpm(后端服务)


#### 服务地址及端口

squid : 192.168.1.101:80

nginx: 192.168.1.102:8080

php-fpm: 192.168.1.103:9000






### Squid



#### 配置

修改 `/etc/squid/squid.conf` ：

```conf
# squid 服务地址及端口
http_port 80 vhost vport


# nginx 服务地址及端口
cache_peer 192.168.1.101 parent 8080 0 no-digest no-query originserver
```


# 校验配置文件
$ sudo squid -k parse

#初始化缓存目录
$ sudo squid -z

# 重启 squid
$ sudo systemctl restart squid
