<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.9.1 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Linux 的使用 - 重定向 - LINOTES</title>
<meta name="description" content="用简洁清晰的语言讨论技术">



<meta property="og:type" content="article">
<meta property="og:locale" content="zh_CN">
<meta property="og:site_name" content="LINOTES">
<meta property="og:title" content="Linux 的使用 - 重定向">
<meta property="og:url" content="https://linotes.netlify.com/tools/redirection/">


  <meta property="og:description" content="用简洁清晰的语言讨论技术">



  <meta property="og:image" content="https://linotes.netlify.com/assets/images/header/linux.jpg">





  <meta property="article:published_time" content="2015-02-01T00:00:00+08:00">






<link rel="canonical" href="https://linotes.netlify.com/tools/redirection/">













<!-- end _includes/seo.html -->


<link href="https://linotes.netlify.com/feed.xml" type="application/atom+xml" rel="alternate" title="LINOTES Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://linotes.netlify.com/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->






<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://linotes.netlify.com/">LINOTES</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="https://linotes.netlify.com/app/rsync/" >Rsync 的用法</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://linotes.netlify.com/server/vsftpd/" >Vsftpd 的用法</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://linotes.netlify.com/kernel/filedescriptor/" >文件描述符简介</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://linotes.netlify.com/tools/tools.datastream/" >数据流处理</a>
            </li>
          
        </ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">切换菜单</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      
  











<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://linotes.netlify.com/assets/images/header/linux.jpg');"
>
  
    <div class="wrapper">
      <h1 class="page__title" itemprop="headline">
        
          Linux 的使用 - 重定向

        
      </h1>
      
        <p class="page__lead">
</p>
      
      
      
    </div>
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="https://linotes.netlify.com/assets/images/bio-photo.jpg" alt="Hawk Zhang" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Hawk Zhang</h3>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">关注</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">北京</span>
        </li>
      

      

      
        <li>
          <a href="mailto:imhawkz@gmail.com">
            <meta itemprop="email" content="imhawkz@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> 电子邮箱
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/hawkzhang" itemprop="sameAs">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">切换菜单</label>
  <ul class="nav__items">
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Linux 的使用 - 重定向">
    <meta itemprop="description" content="">
    <meta itemprop="datePublished" content="February 01, 2015">
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-laptop"></i> Linux 的使用 - 重定向</h4></header>
              <ul class="toc__menu">
  <li><a href="#输入输出流">输入、输出、流</a>
    <ul>
      <li><a href="#文件描述符">文件描述符</a></li>
      <li><a href="#自定义文件描述符">自定义文件描述符</a></li>
    </ul>
  </li>
  <li><a href="#重定向标准-io">重定向标准 I/O</a>
    <ul>
      <li><a href="#重定向输出">重定向输出</a></li>
      <li><a href="#重定向输入">重定向输入</a></li>
    </ul>
  </li>
</ul>
            </nav>
          </aside>
        
        <p>所谓 I/O 重定向简单来说就是一个过程，这个过程捕捉一个文件，或者命令，程序，脚本，甚至脚本中的代码块（code block）的输出，然后把捕捉到的输出，作为输入发送给另外一个文件，命令，程序，或者脚本。</p>

<h2 id="输入输出流">输入、输出、流</h2>

<p>Linux shell 是以字符序列或字符流的方式接收输入，发送输出。每个单独的字符之间是相互独立的。</p>

<p>无论字符流来自或去往文件、键盘、窗口、其它 I/O 设备，都可以用文件 I/O 技术来访问流。</p>

<p>Linux shell 使用三种标准的 I/O 流，用 <strong>文件描述符</strong> 表示。</p>

<h3 id="文件描述符">文件描述符</h3>

<p>File Descriptor</p>

<p>在 Linux 系统中，系统为每一个打开的文件指定一个文件描述符，以便系统对文件进行跟踪，文件描述符是一个数字，不同数字代表不同的含义。</p>

<p>默认情况下，系统占用了 3 个：</p>

<ul>
  <li>
    <p>STDIN：标准输入流，为命令提供输入，描述符为 <strong>0</strong>，通常指键盘的输入</p>
  </li>
  <li>
    <p>STDOUT：标准输出流，显示来自命令的输出，描述符为 <strong>1</strong>，通常指显示器的输出</p>
  </li>
  <li>
    <p>STDERR：标准错误流，显示来自命令的错误信息，描述符为 <strong>2</strong>，通常也是定向到显示器</p>
  </li>
</ul>

<p><code class="highlighter-rouge">3-9</code> 是保留的标识符，可以把这些标识符指定成标准输入，输出或者错误作为临时连接。通常这样可以解决很多复杂的重定向请求。</p>

<h3 id="自定义文件描述符">自定义文件描述符</h3>

<p>可以使用 <code class="highlighter-rouge">exec</code> 命令创建自定义的文件描述符。</p>

<ul>
  <li>为读取文件创建描述符</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~]<span class="nv">$ </span><span class="nb">echo </span>this is a <span class="nb">test </span>line <span class="o">&gt;</span> input.​txt
~]<span class="nv">$ </span><span class="nb">exec </span>3&lt;input.​txt
~]<span class="nv">$ </span><span class="nb">cat</span> &lt;&amp;3
this is a <span class="nb">test </span>line
</code></pre></div></div>

<ul>
  <li>为写入文件创建描述符</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~]<span class="nv">$ </span><span class="nb">exec </span>4&gt;output.txt
~]<span class="nv">$ </span><span class="nb">echo </span>newline <span class="o">&gt;</span>&amp;4
~]<span class="nv">$ </span><span class="nb">cat </span>output.txt
newline
</code></pre></div></div>

<h2 id="重定向标准-io">重定向标准 I/O</h2>

<p>有时需要把文件内容做为输入，或把错误信息输出到文件。</p>

<h3 id="重定向输出">重定向输出</h3>

<p>有两种重定向输出的方法：</p>

<ul>
  <li><strong><code class="highlighter-rouge">n&gt;</code></strong> 从描述符 n 重定向到文件</li>
</ul>

<p>必须对文件有写权限，如果文件不存在，会自动创建；如果存在，文件内容会被覆盖，没有提醒。</p>

<ul>
  <li><strong><code class="highlighter-rouge">n&gt;&gt;</code></strong> 从描述符 n 重定向到文件</li>
</ul>

<p>必须对文件有写权限，如果文件不存在，会自动创建；如果存在，文件内容会被追加到末尾。</p>

<h4 id="简写">简写</h4>

<p>如果描述符 n 被省略，默认代表标准输出。</p>

<p><code class="highlighter-rouge">&gt;</code>	= <code class="highlighter-rouge">1&gt;</code></p>

<p><code class="highlighter-rouge">&gt;&gt;</code> = <code class="highlighter-rouge">1&gt;&gt;</code></p>

<h4 id="合并重定向">合并重定向</h4>

<p>有时需要把标准 <strong>输出</strong> 和标准 <strong>错误</strong> 重定向到 <strong>同一个文件</strong> 中，常用于自动化处理，或后台工作。</p>

<ul>
  <li>方法 1：<strong><code class="highlighter-rouge">&amp;&gt;</code></strong> 和 <strong><code class="highlighter-rouge">&amp;&gt;&gt;</code></strong></li>
</ul>

<p>这种方法直接把输出和错误同时重定向。</p>

<ul>
  <li>方法 2： <code class="highlighter-rouge">&gt;output.txt 2&gt;&amp;1</code></li>
</ul>

<p>先指定标准输出的重定向，再把标准错误重定向到标准输出的位置。于是二者被合并到一起。</p>

<p class="notice--danger">顺序很重要，假设当前标准输出的位置为显示器，则 <code class="highlighter-rouge">2&gt;&amp;1 &gt;output.txt</code> 的结果是错误被输出到显示器，而标准输出被保存到文件。</p>

<h4 id="忽略输出">忽略输出</h4>

<p>有时需要忽略标准输出或标准错误，可以将其重定向到 <strong><code class="highlighter-rouge">/dev/null</code></strong>。</p>

<h4 id="范例">范例</h4>

<ul>
  <li>把标准错误定向到文件</li>
</ul>

<p><code class="highlighter-rouge">2&gt;</code>，<code class="highlighter-rouge">2&gt;&gt;</code></p>

<ul>
  <li>将标准输出和标准错误重定向到同一位置</li>
</ul>

<p><code class="highlighter-rouge">&amp;&gt;</code>，<code class="highlighter-rouge">&amp;&gt;&gt;</code></p>

<p><code class="highlighter-rouge">command &gt;output.txt 2&gt;&amp;1</code></p>

<ul>
  <li>把标准输出，标准错误分别重定向</li>
</ul>

<p><code class="highlighter-rouge">command &gt;stdout.txt 2&gt;stderr.txt</code></p>

<p><code class="highlighter-rouge">command &gt;&gt;stdout.txt 2&gt;&gt;stderr.txt</code></p>

<p><code class="highlighter-rouge">command 2&gt;&amp;1 &gt;output.txt</code></p>

<p><code class="highlighter-rouge">ll aaa sss 2&gt;/dev/null</code></p>

<h3 id="重定向输入">重定向输入</h3>

<p>用 <code class="highlighter-rouge">&lt;</code> 可以把标准输入重定向到某个文件。</p>

<h4 id="here-document">Here-Document</h4>

<p>Here Document 是输入重定向的一种形式，<code class="highlighter-rouge">&lt;&lt; 关键字</code>，该关键字将成为本次输入的 <strong>结束标志</strong>。于是在这一对标志之间的文本成为本次输入的内容。</p>

<p>经常用在脚本中，这是在脚本中指定多行输入内容的唯一的方法。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh">&gt;log.​txt
LOG FILE HEADER
This is a test log file
Function: System statistics
</span><span class="no">EOF
</span></code></pre></div></div>

<p>如果使用 <code class="highlighter-rouge">&lt;&lt;- 关键字</code>，则每一行输入 <strong>开头的 tab 会被删掉</strong>。</p>

<h4 id="范例-1">范例</h4>

<ul>
  <li>重定向输入到文件</li>
</ul>

<p><code class="highlighter-rouge">tr ' ' '\t'&lt;text1</code></p>

<ul>
  <li>使用 here-document</li>
</ul>

<p><code class="highlighter-rouge">sort -k2 &lt;&lt;END</code></p>

<ul>
  <li>复制指定文件内容到新文件</li>
</ul>

<p><code class="highlighter-rouge">cat &gt; catfile &lt; ~/.bashrc</code></p>

<ul>
  <li>使用交互式环境新建文件</li>
</ul>

<p><code class="highlighter-rouge">cat &gt; catfile</code></p>

<ul>
  <li>使用 here-document 方式新建文件</li>
</ul>

<p><code class="highlighter-rouge">cat &gt; catfile &lt;&lt;"eof"</code></p>

        
      </section>




      <footer class="page__meta">
        
        


  


  
  
  

  <p class="page__taxonomy">
	<hr />
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 标签: </strong>
    <span itemprop="keywords">
    
		
      <a href="/tag/linux" class="page__taxonomy-item" rel="tag">linux</a><span class="sep">  </span>
    
		
      <a href="/tag/重定向" class="page__taxonomy-item" rel="tag">重定向</a>
    
    </span>
  </p>













  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> 分类: </strong>
	<!--  <hr />    -->
    <span itemprop="keywords">
    
      
      
      <a href="https://linotes.netlify.com/categories/#tools" class="page__taxonomy-item" rel="tag">tools</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 更新时间:</strong> <time datetime="2015-02-01T00:00:00+08:00">February 01, 2015</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="https://linotes.netlify.com/tools/re/" class="pagination--pager" title="上一页
">Linux 的使用 - 正则表达式</a>
    
    
      <a href="https://linotes.netlify.com/tools/resource/" class="pagination--pager" title="下一页
">Linux 的使用 - 系统资源配置</a>
    
  </nav>


    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">相关文章</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://linotes.netlify.com/kernel/filedescriptor/" rel="permalink">文件描述符简介
</a>
      
    </h2>
    

<!--
    <p class="archive__item-excerpt" itemprop="description">
</p>
-->

  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://linotes.netlify.com/programming/bash03/" rel="permalink">Bash 入门 03
</a>
      
    </h2>
    

<!--
    <p class="archive__item-excerpt" itemprop="description">循环，变量，函数，捕捉信号
</p>
-->

  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://linotes.netlify.com/programming/bash02/" rel="permalink">Bash 入门 02
</a>
      
    </h2>
    

<!--
    <p class="archive__item-excerpt" itemprop="description">正则表达式，SED，AWK，条件结构，交互式脚本
</p>
-->

  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://linotes.netlify.com/programming/bash01/" rel="permalink">Bash 入门 01
</a>
      
    </h2>
    

<!--
    <p class="archive__item-excerpt" itemprop="description">Bash 与 Bash 脚本，脚本的编写与调试，Bash 环境
</p>
-->

  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->


<!-- end custom footer snippets -->

        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>关注:</strong></li>
    
    
    
    
    
    
    <li><a href="https://linotes.netlify.com/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Hawk Zhang. 技术来自于 <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="https://linotes.netlify.com/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>








  </body>
</html>
