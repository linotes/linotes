<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.9.1 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Linux 的使用 - Shell - LINOTES</title>
<meta name="description" content="用简洁清晰的语言讨论技术">



<meta property="og:type" content="article">
<meta property="og:locale" content="zh_CN">
<meta property="og:site_name" content="LINOTES">
<meta property="og:title" content="Linux 的使用 - Shell">
<meta property="og:url" content="https://linotes.netlify.com/tools/shell/">


  <meta property="og:description" content="用简洁清晰的语言讨论技术">



  <meta property="og:image" content="https://linotes.netlify.com/assets/images/header/programming.jpg">





  <meta property="article:published_time" content="2015-02-01T00:00:00+08:00">






<link rel="canonical" href="https://linotes.netlify.com/tools/shell/">













<!-- end _includes/seo.html -->


<link href="https://linotes.netlify.com/feed.xml" type="application/atom+xml" rel="alternate" title="LINOTES Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://linotes.netlify.com/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->






<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://linotes.netlify.com/">LINOTES</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="https://linotes.netlify.com/app/rsync/" >Rsync 的用法</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://linotes.netlify.com/server/vsftpd/" >Vsftpd 的用法</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://linotes.netlify.com/kernel/filedescriptor/" >文件描述符简介</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://linotes.netlify.com/tools/tools.datastream/" >数据流处理</a>
            </li>
          
        </ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">切换菜单</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      
  











<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://linotes.netlify.com/assets/images/header/programming.jpg');"
>
  
    <div class="wrapper">
      <h1 class="page__title" itemprop="headline">
        
          Linux 的使用 - Shell

        
      </h1>
      
        <p class="page__lead">
</p>
      
      
      
    </div>
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="https://linotes.netlify.com/assets/images/bio-photo.jpg" alt="Hawk Zhang" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Hawk Zhang</h3>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">关注</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">北京</span>
        </li>
      

      

      
        <li>
          <a href="mailto:imhawkz@gmail.com">
            <meta itemprop="email" content="imhawkz@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> 电子邮箱
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/hawkzhang" itemprop="sameAs">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">切换菜单</label>
  <ul class="nav__items">
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Linux 的使用 - Shell">
    <meta itemprop="description" content="">
    <meta itemprop="datePublished" content="February 01, 2015">
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-book"></i> Linux 的使用 - Shell</h4></header>
              <ul class="toc__menu">
  <li><a href="#shell-的环境配置">SHELL 的环境配置</a>
    <ul>
      <li><a href="#bash-默认快捷键">Bash 默认快捷键</a></li>
      <li><a href="#启动-bash-时常用的选项">启动 Bash 时常用的选项</a></li>
      <li><a href="#配置文件">配置文件</a></li>
      <li><a href="#环境变量">环境变量</a></li>
      <li><a href="#stty">stty</a></li>
      <li><a href="#set">set</a></li>
      <li><a href="#env">env</a></li>
    </ul>
  </li>
  <li><a href="#bash-常用工具">bash 常用工具</a>
    <ul>
      <li><a href="#history">history</a></li>
      <li><a href="#type">type</a></li>
      <li><a href="#whatis">whatis</a></li>
      <li><a href="#man">man</a></li>
    </ul>
  </li>
</ul>
            </nav>
          </aside>
        
        <h2 id="shell-的环境配置">SHELL 的环境配置</h2>

<p>因为 CentOS 的默认 shell 为 bash，本文中会把 shell 与 bash 混用。</p>

<h3 id="bash-默认快捷键">Bash 默认快捷键</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">组合按键</th>
      <th style="text-align: left">执行结果</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Ctrl + C</td>
      <td style="text-align: left">终止当前命令</td>
    </tr>
    <tr>
      <td style="text-align: left">Ctrl + D</td>
      <td style="text-align: left">输入结束，如邮件结束的时候</td>
    </tr>
    <tr>
      <td style="text-align: left">Ctrl + M</td>
      <td style="text-align: left">回车</td>
    </tr>
    <tr>
      <td style="text-align: left">Ctrl + S</td>
      <td style="text-align: left">暂停屏幕输出</td>
    </tr>
    <tr>
      <td style="text-align: left">Ctrl + Q</td>
      <td style="text-align: left">恢复屏幕输出</td>
    </tr>
    <tr>
      <td style="text-align: left">Ctrl + U</td>
      <td style="text-align: left">删除整行命令</td>
    </tr>
    <tr>
      <td style="text-align: left">Ctrl + Z</td>
      <td style="text-align: left">暂停当前命令</td>
    </tr>
  </tbody>
</table>

<h3 id="启动-bash-时常用的选项">启动 Bash 时常用的选项</h3>

<p>在启动 <code class="highlighter-rouge">/bin/bash</code> 时，可以通过指定不同的选项，来实现不同的环境。</p>

<p><code class="highlighter-rouge">--noprofile</code> ：让 shell 在启动时不执行任何脚本</p>

<p><code class="highlighter-rouge">--norc</code> ：禁止读取 <code class="highlighter-rouge">Bashrc</code> 文件</p>

<p><code class="highlighter-rouge">--rcfile filename</code> ：强制 Bash 使用指定的配置文件，而不用 <code class="highlighter-rouge">~/.Bashrc</code></p>

<p><code class="highlighter-rouge">-login</code> ：以登陆方式运行，会进行用户身份的验证</p>

<h3 id="配置文件">配置文件</h3>

<p>在 shell 启动时，会自动执行一系列脚本，即配置文件，以进行特定的环境设定。具体见 <a href="https://liloli.github.io/programming/bash01/#31-shell-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%87%E4%BB%B6">BASH 入门 01</a>。</p>

<h4 id="重新加载配置文件">重新加载配置文件</h4>

<p>配置文件发生修改后，要想重新加载，需要用 <code class="highlighter-rouge">source</code> 命令，可以简写为句点 <code class="highlighter-rouge">.</code>。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">source</span> ~/.Bashrc
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">.</span> ~/.Bashrc
</code></pre></div></div>

<h4 id="一些特殊的配置文件">一些特殊的配置文件</h4>

<h5 id="登陆提示信息">登陆提示信息</h5>

<h5 id="tty-登陆前-信息">TTY <strong>登陆前</strong> 信息</h5>

<p><code class="highlighter-rouge">/etc/issue</code></p>

<h5 id="ssh-登陆前-信息">SSH <strong>登陆前</strong> 信息</h5>

<p><code class="highlighter-rouge">/etc/issue.net</code></p>

<p>SSH 服务的配置文件为 <code class="highlighter-rouge">/etc/ssh/sshd_config</code>，修改其中的参数 <code class="highlighter-rouge">Banner</code>为 <code class="highlighter-rouge">/etc/issue.net</code> 或其它文件，然后重启 SSH 服务即生效。</p>

<h5 id="成功-登陆后-的信息">成功 <strong>登陆后</strong> 的信息</h5>

<p><code class="highlighter-rouge">/etc/motd</code></p>

<h5 id="提示信息中各代码含义">提示信息中各代码含义：</h5>

<p><code class="highlighter-rouge">\d</code>  本地时间的日期</p>

<p><code class="highlighter-rouge">\l</code>  终端机接口序号</p>

<p><code class="highlighter-rouge">\m</code>  硬件等级</p>

<p><code class="highlighter-rouge">\n</code>  主机的网络名称</p>

<p><code class="highlighter-rouge">\O</code>  域名</p>

<p><code class="highlighter-rouge">\r</code>  内核版本</p>

<p><code class="highlighter-rouge">\t</code>  本地时间</p>

<p><code class="highlighter-rouge">\S</code>  操作系统名称</p>

<p><code class="highlighter-rouge">\v</code>  操作系统版本</p>

<h3 id="环境变量">环境变量</h3>

<p><code class="highlighter-rouge">bashrc</code> 用于交互式非登陆 Shell，<code class="highlighter-rouge">profile</code> 用于交互式登陆 Shell。</p>

<p><code class="highlighter-rouge">/etc/profile</code>，<code class="highlighter-rouge">/etc/bashrc</code> 是设置系统 <strong>全局环境变量</strong>，对所有用户可见。</p>

<p><code class="highlighter-rouge">~/.profile</code>，<code class="highlighter-rouge">~/.bashrc</code> 用于设置用户的 <strong>私有环境变量</strong>，仅对登陆用户自己可见。</p>

<h4 id="export"><code class="highlighter-rouge">export</code></h4>

<p>该命令用于把自定义变量 <strong>导出为环境变量</strong>，供子进程使用。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export CustomVar
</code></pre></div></div>

<h4 id="常用的环境变量">常用的环境变量</h4>

<p><code class="highlighter-rouge">HOME</code>	家目录</p>

<p><code class="highlighter-rouge">SHELL</code>	当前 SHELL，默认 /bin/bash</p>

<p><code class="highlighter-rouge">HISTSIZE</code>	历史列表最大条数，内存</p>

<p><code class="highlighter-rouge">HISTFILESIZE</code>	历史文件最大条数，文件</p>

<p><code class="highlighter-rouge">MAIL</code>	邮箱文件</p>

<p><code class="highlighter-rouge">PATH</code>	可执行文件查找的路径</p>

<p><code class="highlighter-rouge">LANG</code>	语系</p>

<p><code class="highlighter-rouge">RANDOM</code>	随机数变量</p>

<p><code class="highlighter-rouge">$</code>	当前 Shell 的 PID</p>

<p><code class="highlighter-rouge">？</code>	上一个命令的返回值</p>

<p><code class="highlighter-rouge">OSTYPE</code>	操作系统类型</p>

<p><code class="highlighter-rouge">HOSTTYPE</code>	主机类型，架构</p>

<p><code class="highlighter-rouge">MACHTYPE</code>	系统硬件</p>

<h3 id="stty"><code class="highlighter-rouge">stty</code></h3>

<p><code class="highlighter-rouge">stty</code> 用于修改、显示 <strong>终端命令行的设置</strong>，如快捷键的设置等。</p>

<h4 id="语法">语法</h4>

<p><code class="highlighter-rouge">stty [选项] [参数]</code></p>

<p><code class="highlighter-rouge">-a</code> 以容易阅读的方式显示当前的所有配置</p>

<p><code class="highlighter-rouge">-g</code> 以 stty 可读方式显示当前的所有配置</p>

<h4 id="范例">范例</h4>

<ul>
  <li>查看当前所有 stty 设置</li>
</ul>

<p><code class="highlighter-rouge">stty -a</code></p>

<ul>
  <li>禁止输出大写</li>
</ul>

<p><code class="highlighter-rouge">stty iuclc</code>     开启</p>

<p><code class="highlighter-rouge">stty -iuclc</code>    恢复</p>

<ul>
  <li>禁止输出小写</li>
</ul>

<p><code class="highlighter-rouge">stty olcuc</code>    开启</p>

<p><code class="highlighter-rouge">stty -olcuc</code>   恢复</p>

<ul>
  <li>打印出终端的行数和列数</li>
</ul>

<p><code class="highlighter-rouge">stty size</code></p>

<ul>
  <li>改变 Ctrl+D 的方法</li>
</ul>

<p><code class="highlighter-rouge">stty eof "shit"</code></p>

<p>系统默认用 <code class="highlighter-rouge">Ctrl+D</code> 来表示文件的结束，通过这种方法，可以自定义。</p>

<ul>
  <li>屏蔽显示</li>
</ul>

<p><code class="highlighter-rouge">stty -echo</code>   禁止回显，即打字时屏幕不显示，类似输入密码时的状态</p>

<p><code class="highlighter-rouge">stty echo</code>    打开回显，恢复在屏幕上显示键入的字符</p>

<ul>
  <li>忽略回车符</li>
</ul>

<p><code class="highlighter-rouge">stty igncr</code>     开启，此时需用 <code class="highlighter-rouge">ctl + enter</code> 代替回车</p>

<p><code class="highlighter-rouge">stty -igncr</code>   恢复</p>

<h4 id="常用设置项目">常用设置项目</h4>

<p><code class="highlighter-rouge">^</code>   符号代表 <code class="highlighter-rouge">Ctrl</code> 键。</p>

<p><code class="highlighter-rouge">intr = ^C</code>  中止当前程序</p>

<p><code class="highlighter-rouge">quit = ^\</code>  退出当前运行程序</p>

<p><code class="highlighter-rouge">quit = ^\</code>  向后删除</p>

<p><code class="highlighter-rouge">kill = ^U</code>  删除命令行上所有文字</p>

<p><code class="highlighter-rouge">eof = ^D</code>  结束输入</p>

<p><code class="highlighter-rouge">start = ^Q</code>  在某个程序停止后，重新启动其输出</p>

<p><code class="highlighter-rouge">stop = ^S</code>  停止屏幕输出</p>

<p><code class="highlighter-rouge">susp = ^Z</code>  给正在运行的程序发送一个 terminal stop 的信号</p>

<h3 id="set"><code class="highlighter-rouge">set</code></h3>

<p><code class="highlighter-rouge">set</code> 是 shell 的 <strong>内建命令</strong>，用于 <strong>配置 shell</strong>。</p>

<p>启用、禁用一些 shell 的选项及位置参数，修改 shell 属性和位置参数，查询 shell 变量。</p>

<h4 id="shell-内部属性维护">shell 内部属性维护</h4>

<p><code class="highlighter-rouge">set</code> 通过维护一系列现有 shell 内部变量，来 <strong>设置 shell 解释器的属性</strong>，从而能够 <strong>控制 shell 解释器的一些行为</strong>。</p>

<p class="notice--success">每个选项可以视为一个开关，用一个字母表示。开关的状态用 <code class="highlighter-rouge">+</code> 和 <code class="highlighter-rouge">-</code> 表示，<strong><code class="highlighter-rouge">-</code></strong> 表示 <strong>开</strong>，<strong><code class="highlighter-rouge">+</code></strong> 表示 <strong>关</strong>。</p>

<p><strong><code class="highlighter-rouge">$-</code></strong> 变量用于表示 <code class="highlighter-rouge">set</code> <strong>当前打开的参数</strong>，默认值为 <code class="highlighter-rouge">himBH</code>，这是多个选项的组合。</p>

<h4 id="shell-本地变量">shell 本地变量</h4>

<p><code class="highlighter-rouge">set</code> 能够看到当前 shell 的 <strong>所有本地变量</strong>，包括 shell 函数、所有用户自定义变量、环境变量。</p>

<p><code class="highlighter-rouge">set</code> <strong>无法定义新的 shell 变量</strong>。如要定义新的变量，可用 <code class="highlighter-rouge">declare 变量名=值</code>。</p>

<h4 id="语法-1">语法</h4>

<p><code class="highlighter-rouge">set [选项]</code></p>

<p><code class="highlighter-rouge">-u</code>  当执行时使用到未定义过的变量，则显示错误信息。默认不启用。</p>

<p><code class="highlighter-rouge">-v</code>  显示shell所读取的输入值。默认不启用。</p>

<p><code class="highlighter-rouge">-x</code>  执行指令后，会先显示该指令及所下的参数。。默认不启用。</p>

<p><code class="highlighter-rouge">-h</code>  自动记录函数的所在位置。默认启用。</p>

<p><code class="highlighter-rouge">-H</code>  可用 <code class="highlighter-rouge">!命令编号</code> 的方式来执行历史命令。默认启用。</p>

<p><code class="highlighter-rouge">-C</code>  使用 &gt; 操作符时，文件如果存在，不会被覆盖。默认不启用。</p>

<p><code class="highlighter-rouge">-m</code>  启用作业控制，即监控模式。默认启用。</p>

<p class="notice--success"><code class="highlighter-rouge">-m</code> 监控模式：启动作业控制，该选项支持系统 shell 交互，后台进程以单独的进程组运行，在每次完成任务时，会返回文字反馈，其中包含退出状态。</p>

<h4 id="查看当前被-set-启用的选项">查看当前被 set 启用的选项</h4>

<p><code class="highlighter-rouge">echo $-</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~]# <span class="nb">echo</span> <span class="nv">$-</span>
himBH
</code></pre></div></div>

<p>表示当前的 shell 其 <code class="highlighter-rouge">h</code>，<code class="highlighter-rouge">i</code>，<code class="highlighter-rouge">m</code>，<code class="highlighter-rouge">B</code>，<code class="highlighter-rouge">H</code> 这几个开关是打开的。</p>

<h4 id="查看当前进程所有的环境变量">查看当前进程所有的环境变量</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~]# <span class="nb">set</span>
</code></pre></div></div>

<p>输出当前 shell 的所有变量，输出格式：name=value。set 命令的输出可以直接作为 stdin。</p>

<h4 id="若使用未定义变量则显示错误信息">若使用未定义变量，则显示错误信息</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~]# <span class="nb">set</span> <span class="nt">-u</span>
<span class="nb">echo</span> <span class="nv">$vbirding</span>
<span class="nt">-bash</span>: vbirding: unbound variable
</code></pre></div></div>

<p>取消用 <code class="highlighter-rouge">set +u</code></p>

<h4 id="执行前先回显该命令本身">执行前，先回显该命令本身</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ set -x
++ printf '\033\]0;%s@%s:%s\007' dmtsai study '~' \# 列出提示符的控制码
echo ${HOME}
+ echo /home/dmtsai
/home/dmtsai
++ printf '\033\]0;%s@%s:%s\007' dmtsai study '~'
</code></pre></div></div>

<h3 id="env"><code class="highlighter-rouge">env</code></h3>

<p><code class="highlighter-rouge">env</code> 用于 <strong>以修改过的环境来运行命令</strong>，或显示系统中已存在的环境变量。</p>

<p><code class="highlighter-rouge">env</code>  是 <strong>外部命令</strong>，它只能看到 shell 传递给它的变量，以及环境变量。</p>

<p>使用 <code class="highlighter-rouge">env</code> 命令可以新增变量、删除变量、为变量赋值。</p>

<h4 id="语法-2">语法</h4>

<p><code class="highlighter-rouge">env [  -i | - ] [Name=Value ]... [Command [ Argument ... ] ]</code></p>

<p><code class="highlighter-rouge">-i</code> 或 <code class="highlighter-rouge">-</code> ： 不使用任何环境变量，以空的环境运行命令。</p>

<h4 id="查看当前环境变量">查看当前环境变量</h4>

<p>不带参数运行，显示当前的所有环境变量。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">env</span>
</code></pre></div></div>

<h4 id="以空的环境运行命令">以空的环境运行命令</h4>

<p>不使用任何环境变量运行命令：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">env</span> <span class="nt">-i</span> <span class="nb">command</span>
</code></pre></div></div>

<p>可以 <strong>简写</strong> 为 <code class="highlighter-rouge">env -</code>。</p>

<h4 id="反向显示-grep-的查询结果">反向显示 grep 的查询结果</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">env </span><span class="nv">GREP_OPTIONS</span><span class="o">=</span><span class="s1">'-v'</span> <span class="nb">grep </span>one test.txt
</code></pre></div></div>

<p>显示文件中 <strong>不含</strong> <code class="highlighter-rouge">one</code> 的行。</p>

<h4 id="用空的环境运行新-shell">用空的环境运行新 shell</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">env</span> <span class="nt">-i</span> /bin/sh
</code></pre></div></div>

<h4 id="让程序在另一个显示器显示">让程序在另一个显示器显示</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">env </span><span class="nv">DISPLAY</span><span class="o">=</span>foo.bar:1.0 xcalc
</code></pre></div></div>

<p>实际上没有必要以这种方式打开程序，因为 shell 大多支持在执行命令之前临时指定环境变量。如：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ DISPLAY</span><span class="o">=</span>foo.bar:1.0 xcalc
</code></pre></div></div>

<h4 id="在脚本中定义脚本解释器">在脚本中定义脚本解释器</h4>

<p>如：使用 <code class="highlighter-rouge"><span class="c">#!/usr/bin/env python3</span></code>，而不是直接使用 python3 的绝对路径，允许系统在 PATH 变量中查找 python 解释器。</p>

<h2 id="bash-常用工具">bash 常用工具</h2>

<h3 id="history"><code class="highlighter-rouge">history</code></h3>

<ul>
  <li><strong>历史列表</strong>：<strong>内存</strong> 中的命令历史列表，保存 <strong>本次登陆</strong> bash 后键入的命令</li>
  <li><strong>历史文件</strong>：<code class="highlighter-rouge">~/.bash_history</code> 本次登陆之前的历史命令</li>
</ul>

<p class="notice">默认情况下，历史列表中的记录只有在退出 bash 时才会被追加到历史文件中，因此本次登陆后，历史文件中只能看到上次登陆及更早的历史命令。</p>

<h5 id="查看历史文件中所有记录">查看历史文件中所有记录</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">history</span>
</code></pre></div></div>

<h5 id="查看最近-5-条记录">查看最近 5 条记录</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">history </span>5
</code></pre></div></div>

<h5 id="清空历史列表">清空历史列表</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">history</span> <span class="nt">-c</span>
</code></pre></div></div>

<h5 id="把历史列表追加到历史文件中">把历史列表追加到历史文件中</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">history</span> <span class="nt">-a</span>
</code></pre></div></div>

<h5 id="把历史文件中的命令追加到历史列表">把历史文件中的命令追加到历史列表</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">history</span> <span class="nt">-r</span>
</code></pre></div></div>

<h5 id="用历史列表覆盖历史文件">用历史列表覆盖历史文件</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">history</span> <span class="nt">-w</span>
</code></pre></div></div>

<p>#####　运行上一个命令</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="o">!!</span>
</code></pre></div></div>

<h5 id="运行第-66-条命令">运行第 66 条命令</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="o">!</span>66
</code></pre></div></div>

<h5 id="运行最近以-al-开头的命令">运行最近以 al 开头的命令</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="o">!</span>al
</code></pre></div></div>

<h3 id="type"><code class="highlighter-rouge">type</code></h3>

<p>查询 <strong>命令的类别</strong></p>

<h4 id="type-command"><code class="highlighter-rouge">type command</code></h4>

<p>🍎 查询指定命令的类别，是别名、内建命令，还是外部程序。</p>

<p>返回的结果是一句描述。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">type ls
ls </span>is aliased to <span class="s1">'ls --color=auto'</span>
<span class="nv">$ </span><span class="nb">type date
date </span>is /usr/bin/date
<span class="nv">$ </span><span class="nb">type echo
echo </span>is a shell <span class="nb">builtin</span>
</code></pre></div></div>

<h4 id="type--t-command"><code class="highlighter-rouge">type -t command</code></h4>

<p>查询指定命令的类型，会返回一个字符串，用以表示命令类型。</p>

<p>返回的命令类型：</p>

<ul>
  <li><code class="highlighter-rouge">alias</code> ：别名</li>
  <li><code class="highlighter-rouge">keyword</code> ：shell 保留的关键字</li>
  <li><code class="highlighter-rouge">function</code> ：函数</li>
  <li><code class="highlighter-rouge">builtin</code> ：shell 内建命令</li>
  <li><code class="highlighter-rouge">file</code> ：外部程序</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">type</span> <span class="nt">-t</span> <span class="nb">ls
alias</span>
</code></pre></div></div>

<h4 id="type--p-command"><code class="highlighter-rouge">type -p command</code></h4>

<p>查看 <strong>外部命令的完整路径</strong>。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">type</span> <span class="nt">-p</span> <span class="nb">date</span>
/usr/bin/date
</code></pre></div></div>

<h4 id="type--a-command"><code class="highlighter-rouge">type -a command</code></h4>

<p>按 <code class="highlighter-rouge">别名 &gt; bash 内建命令 &gt; 外部程序</code> 顺序在系统中查找包含该命令的路径，所有的匹配都会列出来。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">type</span> <span class="nt">-a</span> <span class="nb">echo
echo </span>is a shell <span class="nb">builtin
echo </span>is /usr/bin/echo
</code></pre></div></div>

<h3 id="whatis"><code class="highlighter-rouge">whatis</code></h3>

<p>该命令用于显示所查询命令帮助文档中的 <strong>描述</strong> 文字，简要说明该命令是做什么用的。</p>

<p><code class="highlighter-rouge">whatis command</code>   查询命令简要说明，及其章节号</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>whatis <span class="nb">echo
echo</span> <span class="o">(</span>1<span class="o">)</span>             - display a line of text
<span class="nb">echo</span> <span class="o">(</span>1p<span class="o">)</span>            - write arguments to standard output
</code></pre></div></div>

<h3 id="man"><code class="highlighter-rouge">man</code></h3>

<p>命令帮助文档。</p>

<p><code class="highlighter-rouge">man 8 partprobe</code>  指定章节号查询</p>

<p><code class="highlighter-rouge">man -f partprobe</code>  同 <code class="highlighter-rouge">whatis</code>，查询命令简要说明及章节号</p>

<p><code class="highlighter-rouge">man -k "partition table"</code>  忘记命令名的情况下，根据关键字反向查询</p>

<p><code class="highlighter-rouge">mandb</code>  更新 man page  缓存</p>

        
      </section>




      <footer class="page__meta">
        
        


  


  
  
  

  <p class="page__taxonomy">
	<hr />
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 标签: </strong>
    <span itemprop="keywords">
    
		
      <a href="/tag/shell" class="page__taxonomy-item" rel="tag">shell</a><span class="sep">  </span>
    
		
      <a href="/tag/bash" class="page__taxonomy-item" rel="tag">bash</a>
    
    </span>
  </p>













  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> 分类: </strong>
	<!--  <hr />    -->
    <span itemprop="keywords">
    
      
      
      <a href="https://linotes.netlify.com/categories/#tools" class="page__taxonomy-item" rel="tag">tools</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 更新时间:</strong> <time datetime="2015-02-01T00:00:00+08:00">February 01, 2015</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="https://linotes.netlify.com/tools/security/" class="pagination--pager" title="上一页
">Linux 的使用 - 安全设置</a>
    
    
      <a href="https://linotes.netlify.com/tools/storage/" class="pagination--pager" title="下一页
">Linux 的使用 - 存储</a>
    
  </nav>


    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">相关文章</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://linotes.netlify.com/kernel/filedescriptor/" rel="permalink">文件描述符简介
</a>
      
    </h2>
    

<!--
    <p class="archive__item-excerpt" itemprop="description">
</p>
-->

  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://linotes.netlify.com/programming/bash03/" rel="permalink">Bash 入门 03
</a>
      
    </h2>
    

<!--
    <p class="archive__item-excerpt" itemprop="description">循环，变量，函数，捕捉信号
</p>
-->

  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://linotes.netlify.com/programming/bash02/" rel="permalink">Bash 入门 02
</a>
      
    </h2>
    

<!--
    <p class="archive__item-excerpt" itemprop="description">正则表达式，SED，AWK，条件结构，交互式脚本
</p>
-->

  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://linotes.netlify.com/programming/bash01/" rel="permalink">Bash 入门 01
</a>
      
    </h2>
    

<!--
    <p class="archive__item-excerpt" itemprop="description">Bash 与 Bash 脚本，脚本的编写与调试，Bash 环境
</p>
-->

  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->


<!-- end custom footer snippets -->

        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>关注:</strong></li>
    
    
    
    
    
    
    <li><a href="https://linotes.netlify.com/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Hawk Zhang. 技术来自于 <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="https://linotes.netlify.com/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>








  </body>
</html>
